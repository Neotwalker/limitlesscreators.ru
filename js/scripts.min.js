"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".cookies"),t=document.querySelector(".cookies--button");e&&t&&(localStorage.getItem("cookieConsent")||e.classList.add("active"),t.addEventListener("click",(()=>{localStorage.setItem("cookieConsent","true"),e.classList.remove("active")})));const s=document.querySelector(".header"),o=document.querySelector(".top"),c=document.querySelector(".modal"),n=document.querySelector(".modal--send"),a=window.innerWidth-document.documentElement.clientWidth,l=document.querySelector(".burger"),i=document.querySelector(".header--menu"),r=document.querySelector(".header--menu .menu");if(s&&o){const w=()=>{s.classList.toggle("scroll",window.scrollY>40),o.classList.toggle("scroll",window.scrollY>500)};w(),window.addEventListener("load",w),window.addEventListener("scroll",w),o.addEventListener("click",(()=>window.scrollTo({top:0,behavior:"smooth"})))}function d(){l.classList.remove("active"),i.classList.remove("open"),r.classList.remove("active"),c?.classList.contains("active")||(document.documentElement.classList.remove("overflow"),s.style.paddingRight="",document.body.style.paddingRight=""),window.innerWidth<=1200&&document.querySelectorAll(".sub-menu").forEach((e=>{e.classList.remove("active");const t=e.closest(".menu-item-has-children");t&&t.classList.remove("active")}))}if(l&&i&&r&&s){function q(){document.querySelectorAll(".header--menu .menu-item-has-children").forEach((e=>{let t=e.querySelector(".submenu-toggle");const s=e.querySelector(":scope > .sub-menu"),o=e.querySelector(":scope > a");window.innerWidth<=1200?!t&&s&&(t=document.createElement("button"),t.type="button",t.className="submenu-toggle",t.setAttribute("aria-expanded","false"),t.setAttribute("aria-label",`Открыть подменю ${o?o.textContent.trim():""}`),t.innerHTML='<span class="toggle-icon" aria-hidden="true"></span>',o.insertAdjacentElement("afterend",t),t.addEventListener("click",(o=>{o.stopPropagation(),o.preventDefault(),function(e,t){if(window.innerWidth>1200)return e.classList.toggle("active"),void t.classList.toggle("active");const s=e.classList.contains("active"),o=t.closest(".sub-menu"),c=o?o.querySelectorAll(".sub-menu.active"):r.querySelectorAll(".sub-menu.active"),n=o?o.querySelectorAll(".menu-item-has-children.active"):r.querySelectorAll(".menu-item-has-children.active");c.forEach((e=>{e.classList.remove("active")})),n.forEach((e=>{e.classList.remove("active")})),e.classList.toggle("active",!s),t.classList.toggle("active",!s)}(s,e),t.setAttribute("aria-expanded",s.classList.contains("active"))}))):(t&&t.remove(),s?.classList.remove("active"),e.classList.remove("active"))}))}l.addEventListener("click",(e=>{e.stopPropagation(),function(){const e=!i.classList.contains("open");i.classList.toggle("open"),l.classList.toggle("active"),r.classList.toggle("active",e),e?(document.documentElement.classList.add("overflow"),a>0&&(s.style.paddingRight=`${a}px`,document.body.style.paddingRight=`${a}px`)):c?.classList.contains("active")||(document.documentElement.classList.remove("overflow"),s.style.paddingRight="",document.body.style.paddingRight=""),window.innerWidth<=1200&&document.querySelectorAll(".sub-menu").forEach((e=>{e.classList.remove("active");const t=e.closest(".menu-item-has-children");t&&t.classList.remove("active")}))}()})),document.querySelectorAll(".header--menu .menu li a").forEach((e=>{e.addEventListener("click",(t=>{t.stopPropagation();(e.getAttribute("href")||"").startsWith("#")&&d()}))})),q(),window.addEventListener("resize",(()=>{q(),window.innerWidth>1200?r.classList.remove("active"):i.classList.contains("open")&&r.classList.add("active")}))}c&&s&&(document.querySelectorAll(".modal--open").forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),document.querySelector(".modal--general")?.classList.add("active"),document.documentElement.classList.add("overflow"),a>0&&(s.style.paddingRight=`${a}px`,document.body.style.paddingRight=`${a}px`)}))})),document.querySelectorAll(".modal--close").forEach((e=>{e.addEventListener("click",(e=>{e.stopPropagation(),console.log("Closing modal, headerMenu open:",i?.classList.contains("open")),c.classList.remove("active"),n?.classList.remove("active"),i?.classList.contains("open")||(document.documentElement.classList.remove("overflow"),s.style.paddingRight="",document.body.style.paddingRight="")}))}))),document.addEventListener("click",(e=>{!c?.classList.contains("active")||e.target.closest(".modal--open")||e.target.closest(".modal .modal--wrapper")||e.target.closest(".modal .modal--close")||(console.log("Click outside modal, headerMenu open:",i?.classList.contains("open")),c.classList.remove("active"),n?.classList.remove("active"),i?.classList.contains("open")||(document.documentElement.classList.remove("overflow"),s.style.paddingRight="",document.body.style.paddingRight="")),!l?.classList.contains("active")||e.target.closest(".header--menu")||e.target.closest(".burger")||e.target.closest(".modal")||(console.log("Closing burger menu"),d()),window.innerWidth<=1200&&i?.classList.contains("open")&&!e.target.closest(".header--menu")&&!e.target.closest(".modal")&&document.querySelectorAll(".sub-menu.active").forEach((e=>{e.classList.remove("active");const t=e.closest(".menu-item-has-children");t&&t.classList.remove("active")}))}));document.querySelectorAll('input[name="fio"], input[name="fio1"]').forEach((e=>{e.addEventListener("keyup",(()=>{e.value=e.value.replace(/http|https|url|www|\.net|\.ru|\.com|[0-9]/gi,"")}))}));const u=document.querySelectorAll(".wpcf7-tel"),m=e=>{const t=e.target,s=t.dataset.phoneClear,o=t.dataset.phonePattern||"+_(___) ___-__-__",c=o.replace(/\D/g,"");let n=t.value.replace(/\D/g,"");if("false"!==s&&"blur"===e.type&&n.length<o.match(/[\_\d]/g).length)return void(t.value="");c.length>=n.length&&(n=c);let a=0;t.value=o.replace(/./g,(e=>/[_\d]/.test(e)&&a<n.length?n.charAt(a++):a>=n.length?"":e))};u.forEach((e=>["input","blur","focus"].forEach((t=>e.addEventListener(t,m)))));const v=(e,t)=>{const s=document.getElementById(e),o=document.querySelector(t);s&&o&&(o.setAttribute("disabled","disabled"),s.addEventListener("change",(()=>{o.toggleAttribute("disabled",!s.checked)})))};v("check",".modal--general button"),v("check1",".main--contacts__left form button"),document.querySelectorAll(".wpcf7-form").forEach((e=>{e.addEventListener("submit",(()=>{document.addEventListener("wpcf7mailsent",(t=>{e.querySelector(".cf7sg-response-output")?.style.setProperty("display","none"),document.querySelectorAll(".modal").forEach((e=>e.classList.remove("active"))),n&&(n.classList.add("active"),setTimeout((()=>{n.classList.remove("active"),i?.classList.contains("open")||(document.documentElement.classList.remove("overflow"),s.style.paddingRight="",document.body.style.paddingRight="")}),5e3)),e.querySelector(".wpcf7-submit")?.setAttribute("disabled","disabled"),e.reset()}),{once:!0})}))})),window.innerWidth<=768&&document.querySelectorAll(".footer--menu").forEach(((e,t)=>{const s=e.querySelector(".h3"),o=e.querySelector(".menu");s&&o&&(0===t&&(e.classList.add("active"),o.style.maxHeight=`${o.scrollHeight}px`),s.addEventListener("click",(()=>{document.querySelectorAll(".footer--menu").forEach((t=>{t!==e&&(t.classList.remove("active"),t.querySelector(".menu").style.maxHeight=null)})),e.classList.toggle("active"),o.style.maxHeight=e.classList.contains("active")?`${o.scrollHeight}px`:null})))}));const g=document.querySelectorAll(".main--cases__tags .tag"),h=document.querySelectorAll(".main--cases__block");g.length&&h.length&&g.forEach((e=>{e.addEventListener("click",(()=>{g.forEach((e=>e.classList.remove("active"))),e.classList.add("active");const t=e.getAttribute("data-filter");h.forEach(((e,s)=>{e.classList.toggle("active","*"===t?0===s:e.getAttribute("data-type")===t)}))}))}));((e,t,s)=>{const o=document.querySelectorAll(e);if(!o.length)return;const c=o[0],n=c.querySelector(t),a=c.querySelector(s);n&&a&&(c.classList.add("active"),n.classList.add("active"),c.dataset.open="true",a.style.maxHeight=`${a.scrollHeight}px`);o.forEach((e=>{const c=e.querySelector(t),n=e.querySelector(s);c&&n&&(c.addEventListener("click",(()=>{const a="true"===e.dataset.open;o.forEach((o=>{o!==e&&(o.dataset.open="false",o.classList.remove("active"),o.querySelector(t)?.classList.remove("active"),o.querySelector(s).style.maxHeight="")})),e.dataset.open=a?"false":"true",e.classList.toggle("active",!a),c.classList.toggle("active",!a),n.style.maxHeight=a?"":`${n.scrollHeight}px`,a||setTimeout((()=>{const t=e.getBoundingClientRect();if(!(t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight))){const e=(()=>{const e=document.querySelector(".header");return e?e.offsetHeight:0})(),s=window.scrollY+t.top-e-10;window.scrollTo({top:s,behavior:"smooth"})}}),300)})),window.addEventListener("resize",(()=>{"true"===e.dataset.open&&parseInt(n.style.maxHeight)!==n.scrollHeight&&(n.style.maxHeight=`${n.scrollHeight}px`)})))}))})(".main--faq__item",".main--faq__item--button",".main--faq__item--answer");const L=document.querySelectorAll(".main--header__info"),p=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&e.target.classList.add("visible")}))}),{threshold:.2});L.forEach((e=>p.observe(e)));const y=document.querySelectorAll(".main--adv__wrapper .item, .main--adv .h2, .main--services .h2, .main--services .subtitle, .main--services__wrapper"),f=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?e.target.classList.add("visible"):e.target.classList.remove("visible")}))}),{threshold:.2});y.forEach((e=>f.observe(e)));const b=document.querySelectorAll(".main--companies"),E=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?e.target.classList.add("visible"):e.target.classList.remove("visible")}))}),{threshold:.2});b.forEach((e=>E.observe(e)))}));